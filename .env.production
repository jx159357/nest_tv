# =============================================================================
# 生产环境配置
# =============================================================================

# 应用配置
NODE_ENV=production
PORT=3335

# 数据库配置
DB_HOST=mysql
DB_PORT=3306
DB_USERNAME=nest_user
DB_PASSWORD=nest_password
DB_DATABASE=nest_tv
DB_SYNCHRONIZE=false
DB_LOGGING=false

# Redis配置
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# JWT配置
JWT_SECRET=your-super-secret-jwt-key-here-change-in-production-use-minimum-32-characters
JWT_EXPIRES_IN=7d

# 文件上传配置（如果需要）
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760  # 10MB in bytes
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,mp4,webm,avi

# 邮件配置（如果需要）
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
EMAIL_FROM=noreply@yourdomain.com

# 日志配置
LOG_LEVEL=warn
LOG_FILE=logs/app.log
LOG_MAX_SIZE=52428800  # 50MB in bytes
LOG_MAX_FILES=10

# 缓存配置
CACHE_TTL=3600  # 1 hour in seconds
CACHE_MAX_ITEMS=1000

# 安全配置
CORS_ORIGIN=https://yourdomain.com
CORS_METHODS=GET,POST,PUT,DELETE,PATCH
CORS_CREDENTIALS=true
RATE_LIMIT_WINDOW=900000  # 15 minutes in milliseconds
RATE_LIMIT_MAX=100  # requests per window

# 监控配置
ENABLE_METRICS=true
METRICS_PORT=9090

# 性能配置
CLUSTER_WORKERS=0  # 0 means let OS decide (or set to number of CPU cores)
CLUSTER_MAX_MEMORY=2048  # MB per worker

# Docker环境变量（会被docker-compose覆盖）
DOCKERIZED=true

# 开发/生产切换提示
# ============================================================================= 
# 这是生产环境配置文件
# 在生产服务器上设置这些环境变量
# 
# 启动方式：
# 1. 使用docker-compose: 自动从.env.production文件加载
# 2. 使用docker run: 手动设置环境变量
# 
# 安全注意事项：
# 1. 更改JWT_SECRET为强密码
# 2. 更改数据库密码
# 3. 配置正确的CORS_ORIGIN
# 4. 在生产服务器上使用强HTTPS
# =============================================================================